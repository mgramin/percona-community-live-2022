<html>
<head>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/blood.min.css" id="theme">
</head>
<body>
	
    <div class="reveal">
		<div class="slides">

            
            <section data-background-size="contain" data-background-image="images/code_background.png">
                <h1>Database as Code</h1>
                <h3>Not only migrations</h3>
                <span>@mgramin</span>

                <aside class="notes">
                    Hey! My name is Maks.
                    I am independent database consultant, researcher and big fun of SQL.
                    And today we gonna talk about "Database as Code. Not Only Migrations".
                </aside>
            </section>


            <section data-markdown>
                ### Agenda

                - What is it?
                - Is there it in real life?
                - Migration Scripts are just the Beginning

                Note:
                We will discuss:
                - What is it?
                - Is there "Database as Code" in real life, in wildlife?
                - And we will see that migration scripts are just the very beginning of the hard road to "Database as Code"
    
                Let's Go!
            </section>


            <section data-markdown>
                ### Everything as Code

                - **Pipeline** (Jenkinsfile, .gitlab-ci.yml)
                - **Infrastructure** (Ansible, Terraform, K8s)
                - **Diagram** (Mermaid, PlantUML)
                - **Documentation** (Markdown, AsciiDoc)
                - **Tests** (Gatling, Cucumber)

                Note:
                And we will start with "Everything as Code" things.
                
                "Everything as Code" (as we now) is a philosophy, 
                where any IT area might be represented as a plain code. 
                
                And we can work with it using standard tools and technologies 
                (like code editors, IDE, control version systems, static analyzis, CI/CD pipelines etc.).
                
                And yes, indeed, there are many "Everything as Code" realizations for many areas.
                For example:
                - Gitlab CI
                - Ansible playbooks
                - Mernaid.js
                - Markdown
                - etc
            </section>


            <section data-markdown>
                ### Everything as Code. Pros

                - No Monstrous GUI
                - Full Version Control
                - Code Review
                - Testing & Repeatable
                - Everybody ~Lies~ is Coding

                Note:

                And we can get all the benefits of working with Code:

                - No Monstrous GUI - Where you are afraid to click something wrong
                - Full Version Control - For all your changes
                - Code Review - You can show your code something else and get feedback
                - Testing - Before deploy in Production you can Deploy on Dev and Test environments
                - Everybody in your team is Coding and using the same tools

                We are used to the Everything as Code things and we love it!
            </section>


            <section data-markdown>
                ## How about "Database as Code"?

                Note:
                But how about "DATABASE as Code"?
            </section>


            <section 
                    data-background-size="contain"
                    data-background-image="images/database_as_code.jpg">

                <aside class="notes" data-markdown>
                    It was a very exotic combination of words, 
                    but Dan North in hist talk "Aren't we forgetting someone?"
                    proposed four simple rules for treating a database like Code:

                    - All database changes are scripted and automated
                    - All database changes are under version control
                    - Ability to release on demand at any time
                    - AND DBA should be integrated with Dev and Ops people
                </aside>
            </section>


            <section 
                    data-background-size="contain"
                    data-background-image="images/liquibase.jpg">

                <aside class="notes" data-markdown>
                    It's been six years, and nowadays, 
                    it's hard to find a project that doesn't follow these rules (at least the first three). 
                    
                    There are a lot of different database migration tools 
                    and different ways to integrate it with your Version Control system and your CI/CD pipeline.

                    For example:
                    - Flyway
                    - GitHub online migration tool
                    - Sqitch
                    - Skeema
                    - and ofcourse Liquibase
                    
                    And it's really great!
                </aside>
            </section>


            <section data-markdown>
                ### DB isn't only Schema

                Note:
                But we know - DB is not only Schema, is not only DDL operations!
            </section>


            <section data-markdown>
                ### DB isn't only Schema

                - Queries (DML)
                - Administration
                - Monitoring
                - Data Transformation
                - Documentation
                - etc
                
                Note:
                First of all, DB is Data and Queries to Data (DML for data and metadata)
                
                Also databases needs:
                - Administration (like space managment and memory management)
                - Monitoring (metrics gathering and perfomance troubleshooting)
                - Data Transformation
                - Documentation (like Diagrams)
                - and all this stuff

                And there is a special Language for all these things.
                And of course - it is SQL!
            </section>

            
            <section 
                    data-background-size="contain"
                    data-background-image="images/sql_everywhere.jpg">
                
                <aside class="notes" data-markdown>
                    SQL is a universal language for data and metadata.

                    And SQL first of all was made by humans for humans, not for machines.
                </aside>
            </section>


            <section data-markdown>
                ### SQL Hell

                - Generated Queries
                - injected Queries
                - Queries in config files
                
                Note:
                But on the other hand we have some problems with SQL, 
                I call it "SQL Hell" (like "Jar Hell" or "DLL Hell").
                
                Our SQL-queries scattered everywhere:
                
                - Our applicatons generate tonns of Dynamic Queries
                - Many Static Queries are injected directly into the code of another program 
                (like Java, Python or something else)
                - or placed in configuration files (like YML, JSON or TOML)
                

                And we can't control, test and trust these tons of SQL.
            </section>


            <section data-markdown>
                ### Keep All SQL as Code
                
                Note:
                
                But how about dead simple idea -
                "Keep All SQL-queries as Normal Code"?
            </section>


            <section data-markdown>
                ### Database as Code 2.0

                - Treat your DB as Code
                - Code Lifecycle
                - SQL is a main DB Language
                - Database code is not only DDL
                - SQL is not a bytecode
                - Git is a single source of Truth
                
                Note:

            </section>


            <!-- <section data-markdown>
                #### mgramin/database-as-code
            </section> -->


            <section data-markdown>
                ### Is There It in WildLife?
                
                Note:
                But Is There It in WildLife?

                And our answer: "Yes it is!"
            </section>


            <section 
                    data-background-size="contain"
                    data-background-image="images/what_is_dbt.jpg">

                <aside data-markdown class="notes">

                </aside>
            </section>


            <section data-markdown>
                ### Data Maping
                - Yesql
                - HugSQL
                - SQLDelight
                - PugSQL
                
                Note:

            </section>

            <section data-markdown>
                ### Project Malewicz
                
                Note:

                Is Yet Another graphic SQL-client (or SQL-manager) but...

            </section>

            <section data-markdown>
                ### Thank You!

                - https://speakerdeck.com/tastapod/arent-we-forgetting-someone
                - https://github.com/mgramin/database-as-code
                - https://github.com/mgramin/malewicz
                - https://github.com/mgramin/awesome-db-tools

                Note:

                Thank you! I'm open do discussions
            </section>

		</div>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/markdown/markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/notes/notes.min.js"></script>

	<script>
		Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            plugins: [ RevealMarkdown, RevealNotes ],
            slideNumber: true,
            autoAnimate: false,
            transition: 'none'
        });
	</script>

</body>
</html>